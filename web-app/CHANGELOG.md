# WordLog 版本迭代日志

## 📦 当前版本：v1.11.0

---

## 🎯 版本历史

### v1.11.0 (2026-02-13) - 查词/生图/导出与保存逻辑优化
**主题：服务端查词、导出范围、按输入形式存单词、生图支持 MiniMax**

#### ✨ 新功能
- **服务端查词**：查词 API Key 放在 Vercel 环境变量，用户无需配置即可使用（你配置一次即可）
- **导出范围**：支持「全部」与「仅无图」两种导出范围，方便导出无图单词去生图
- **一键生图**：列表页恢复「一键生图」入口，无图单词时显示，支持进度条
- **生图支持 MiniMax**：配置 MiniMax API Key 后，生图优先使用 MiniMax image-01，未配置时回退智谱 CogView

#### 🔧 改进
- **按输入形式保存**：添加单词时输入 ran 即存 ran、输入 running 即存 running，不再自动转原形；run / ran / running 可同时存在
- **释义兜底**：无结果时自动尝试用原形查释义，仍保存你输入的形式
- **导出格式**：设置中恢复 TXT / CSV / MD 三种导出按钮，均受「全部 / 仅无图」控制
- **移除启动迁移**：不再在启动时把已有单词自动转为原形

#### 🐛 修复
- 查词超时使用 AbortController 正确生效
- 批量刷新释义增加并发限制，缩短等待时间

---

### v1.10.1 (2026-02-09) - 数据稳定性修复
**主题：CSV 解析修复 + 数据持久化加固**

#### 🐛 修复
- **CSV 词性显示 "unknown"**：重构 CSV 定义导出格式，使用 `pos:::def|||pos:::def` 结构化格式，避免中文分号与释义文本冲突导致解析错乱
- **刷新释义丢失配图**：`batchFetchDefinitions` 合并数据时，优先保留原有 `imageUrl`，API 返回空值不再覆盖已有图片
- **闪卡掌握度丢失**：`markResult` 函数在标记单词后立即写入 `localStorage`，不再依赖 Zustand store 的异步更新

#### 🔧 改进
- **CSV 导出格式升级**：每个释义独立保存为 `词性:::释义` 格式，多个释义用 `|||` 分隔，完全消除解析歧义
- **CSV 导入兼容性**：自动检测新旧 CSV 格式，旧格式（分号分隔）仍可正常导入

---

### v1.10.0 (2026-02-09) - 闪卡体验升级
**主题：闪卡记忆持久化 + 界面优化 + 自然语音**

#### ✨ 新功能
- **闪卡状态持久化**：闪卡复习进度（未学/认识/不认识）自动保存到 localStorage，刷新页面不丢失，继续上次复习
- **Edge TTS 自然语音**：例句朗读从机器人声升级为微软 Edge 神经网络语音（en-US-AriaNeural），更自然流畅
- **Vercel Serverless TTS API**：新增 `/api/tts` 后端接口代理 Edge TTS，浏览器直接播放 MP3 音频
- **TXT 单词导入**：支持 TXT 文件批量导入单词（一行一个），自动查询释义
- **CSV 单词导入**：支持 CSV 文件导入，直接携带释义数据，无需 API 查询
- **Vercel 部署上线**：产品正式部署到 thewordlog.vercel.app，可通过公网访问

#### 🔧 改进
- **闪卡卡片加宽**：卡片最大宽度从 672px 提升至 896px（max-w-2xl → max-w-4xl），长单词不再折行
- **配图模式优化**：图片区域从 1/2 缩小至 1/3，文字区域从 1/2 扩大至 2/3，单词显示更完整
- **响应式字体**：正面 text-5xl/md:text-6xl，背面 text-4xl/xl:text-5xl，适配不同屏幕
- **长单词保护**：增加 break-words、overflow-hidden 防止超长单词溢出
- **语音回退机制**：Edge TTS 失败时自动回退到 Web Speech API，保证始终可用

#### 🐛 修复
- 修复闪卡刷新后进度归零的问题
- 修复长单词在配图模式下被截断显示不全的问题

---

### v1.3.0 (2025-02-05) - 用户体验全面升级
**主题：输入体验优化与自动化**

#### ✨ 新功能
- **超大输入框弹窗**：36px 超大字体，80px 高度输入框，大幅提升可读性
- **智能单词查询 API**：集成 Free Dictionary API，自动获取音标、释义、例句
- **一键刷新功能**：批量更新所有占位符数据，不再需要手动修复脚本
- **回车快捷提交**：输入框支持回车键快速提交，提升输入效率
- **实时预览**：输入时实时预览单词，增强交互反馈

#### 🔧 改进
- 添加单词时自动查询完整释义（音标、词性、释义、例句）
- 修复脚本增加音标数据支持
- 优化错误提示，更友好的用户反馈
- 输入验证优化，只允许英文字母和连字符

#### 🐛 修复
- 修复 localStorage 和 chrome.storage 数据同步问题
- 修复网页版无法使用修复脚本的问题

---

### v1.2.0 (2025-02-04) - 语音功能增强
**主题：语音质量优化**

#### ✨ 新功能
- **智能语音选择**：优先使用高质量 TTS 语音（Google US English、Microsoft David、Samantha 等）
- **例句朗读**：单词详情弹窗支持点击例句进行朗读
- **单词发音**：点击单词即可朗读，点击音标图标也可播放

#### 🔧 改进
- 优化语音播放速度（0.85-0.8），更清晰易听
- 添加音量控制，最大音量输出
- 优化语音选择逻辑，自动匹配最佳语音

---

### v1.1.0 (2025-02-03) - 基础功能完善
**主题：核心功能补全**

#### ✨ 新功能
- **单词详情弹窗**：点击卡片查看完整释义、例句、译文
- **删除功能**：支持删除单个单词
- **搜索功能**：实时搜索单词和释义
- **导出功能**：支持导出 TXT、CSV、Obsidian Markdown 格式
- **主题切换**：支持浅色/深色主题
- **设置页面**：主题设置、数据统计、数据清空

#### 🔧 改进
- 按日期分组显示单词
- 显示今日新增统计
- 移动端响应式适配
- Toast 提示组件

---

### v1.0.0 (2025-02-02) - MVP 版本发布
**主题：核心功能上线**

#### ✨ 新功能
- **Chrome 扩展**：右键菜单添加单词、快捷键（Alt+W）添加
- **React 网页应用**：单词列表展示、卡片式布局
- **数据存储**：Chrome Storage + localStorage 双存储
- **基础释义查询**：使用 Free Dictionary API 获取英文释义
- **去重逻辑**：自动检测重复单词，更新时间戳

#### 🎨 设计
- Claude 风格：温暖橙色主题（#D97757）
- 简洁现代的卡片设计
- 响应式布局支持

---

## 🚀 即将推出

### v1.4.0 (计划中)
- [ ] 中文释义翻译（集成翻译 API）
- [ ] Anki 导出格式
- [ ] 单词测试/复习功能
- [ ] 学习进度统计

### v1.5.0 (规划中)
- [ ] Obsidian 实时同步
- [ ] 多语言支持（日语、韩语等）
- [ ] 云端备份
- [ ] 跨设备同步

---

## 📝 版本号说明

版本号格式：`主版本.次版本.修订版本`

- **主版本**：重大架构变更或功能重构
- **次版本**：新功能添加或重要改进
- **修订版本**：Bug 修复或小优化

---

## 🤝 贡献者

- 素素 - 产品设计与开发
- Claude - AI 辅助开发

---

## 📮 反馈渠道

如有问题或建议，请联系项目维护者。
